{"version":3,"sources":["webpack:///webpack/bootstrap 92bfe78bb605b723b69a","webpack:///./public/js/main.js","webpack:///./public/js/spotifylogin.js"],"names":["require","module","exports","$","document","ready","console","log","getHashParams","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","userProfileSource","getElementById","innerHTML","userProfileTemplate","Handlebars","compile","userProfilePlaceholder","oauthSource","oauthTemplate","oauthPlaceholder","params","access_token","refresh_token","error","alert","ajax","url","headers","success","response","hide","show","addEventListener","data","done"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;ACtCA;AACA;AACA;;AAEA;AACA,oBAAAA,CAAS,uBAAT,E;;;;;;;;;;;ACLAC,QAAOC,OAAP,GAAiBC,EAAEC,QAAF,EAAYC,KAAZ,CAAmB,YAAM;AAClCC,WAAQC,GAAR,CAAY,WAAZ;AACA;;;;AAIA,YAASC,aAAT,GAAyB;AACvB,SAAIC,aAAa,EAAjB;AACA,SAAIC,CAAJ;AAAA,SAAOC,IAAI,sBAAX;AAAA,SACIC,IAAIC,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBC,SAArB,CAA+B,CAA/B,CADR;AAEA,YAAQN,IAAIC,EAAEM,IAAF,CAAOL,CAAP,CAAZ,EAAuB;AACpBH,kBAAWC,EAAE,CAAF,CAAX,IAAmBQ,mBAAmBR,EAAE,CAAF,CAAnB,CAAnB;AACF;AACD,YAAOD,UAAP;AACD;;AAED,OAAIU,oBAAoBf,SAASgB,cAAT,CAAwB,uBAAxB,EAAiDC,SAAzE;AAAA,OACIC,sBAAsBC,WAAWC,OAAX,CAAmBL,iBAAnB,CAD1B;AAAA,OAEIM,yBAAyBrB,SAASgB,cAAT,CAAwB,cAAxB,CAF7B;;AAIA,OAAIM,cAActB,SAASgB,cAAT,CAAwB,gBAAxB,EAA0CC,SAA5D;AAAA,OACIM,gBAAgBJ,WAAWC,OAAX,CAAmBE,WAAnB,CADpB;AAAA,OAEIE,mBAAmBxB,SAASgB,cAAT,CAAwB,OAAxB,CAFvB;;AAIA,OAAIS,SAASrB,eAAb;;AAEA,OAAIsB,eAAeD,OAAOC,YAA1B;AAAA,OACIC,gBAAgBF,OAAOE,aAD3B;AAAA,OAEIC,QAAQH,OAAOG,KAFnB;;AAIA,OAAIA,KAAJ,EAAW;AACTC,WAAM,8CAAN;AACD,IAFD,MAEO;AACL,SAAIH,YAAJ,EAAkB;AAChB;AACAF,wBAAiBP,SAAjB,GAA6BM,cAAc;AACzCG,uBAAcA,YAD2B;AAEzCC,wBAAeA;AAF0B,QAAd,CAA7B;;AAKA5B,SAAE+B,IAAF,CAAO;AACHC,cAAK,+BADF;AAEHC,kBAAS;AACP,4BAAiB,YAAYN;AADtB,UAFN;AAKHO,kBAAS,iBAASC,QAAT,EAAmB;AAC1Bb,kCAAuBJ,SAAvB,GAAmCC,oBAAoBgB,QAApB,CAAnC;;AAEAnC,aAAE,QAAF,EAAYoC,IAAZ;AACApC,aAAE,WAAF,EAAeqC,IAAf;AACD;AAVE,QAAP;AAYD,MAnBD,MAmBO;AACH;AACArC,SAAE,QAAF,EAAYqC,IAAZ;AACArC,SAAE,WAAF,EAAeoC,IAAf;AACH;;AAED;AACAnC,cAASgB,cAAT,CAAwB,kBAAxB,EAA4CqB,gBAA5C,CAA6D,OAA7D,EAAsE,YAAW;AAC/EtC,SAAE+B,IAAF,CAAO;AACLC,cAAK,gBADA;AAELO,eAAM;AACJ,4BAAiBX;AADb;AAFD,QAAP,EAKGY,IALH,CAKQ,UAASD,IAAT,EAAe;AACrBZ,wBAAeY,KAAKZ,YAApB;AACAF,0BAAiBP,SAAjB,GAA6BM,cAAc;AACzCG,yBAAcA,YAD2B;AAEzCC,0BAAeA;AAF0B,UAAd,CAA7B;AAID,QAXD;AAYD,MAbD,EAaG,KAbH;AAcD;AACR,EA1EgB,CAAjB,C","file":"webpack.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 92bfe78bb605b723b69a","// test webpack, should alert after 3 sec on index\n// const name = 'Scotch.io';\n// setTimeout(() => alert(`Hello there from ${name}`), 300);\n\n// require script\nrequire( './spotifylogin' )\n\n\n// WEBPACK FOOTER //\n// ./public/js/main.js","module.exports = $(document).ready( () => {\n        console.log(\"triggered\")\n        /**\n         * Obtains parameters from the hash of the URL\n         * @return Object\n         */\n        function getHashParams() {\n          var hashParams = {};\n          var e, r = /([^&;=]+)=?([^&;]*)/g,\n              q = window.location.hash.substring(1);\n          while ( e = r.exec(q)) {\n             hashParams[e[1]] = decodeURIComponent(e[2]);\n          }\n          return hashParams;\n        }\n\n        var userProfileSource = document.getElementById('user-profile-template').innerHTML,\n            userProfileTemplate = Handlebars.compile(userProfileSource),\n            userProfilePlaceholder = document.getElementById('user-profile');\n\n        var oauthSource = document.getElementById('oauth-template').innerHTML,\n            oauthTemplate = Handlebars.compile(oauthSource),\n            oauthPlaceholder = document.getElementById('oauth');\n\n        var params = getHashParams();\n\n        var access_token = params.access_token,\n            refresh_token = params.refresh_token,\n            error = params.error;\n\n        if (error) {\n          alert('There was an error during the authentication');\n        } else {\n          if (access_token) {\n            // render oauth info\n            oauthPlaceholder.innerHTML = oauthTemplate({\n              access_token: access_token,\n              refresh_token: refresh_token\n            });\n\n            $.ajax({\n                url: 'https://api.spotify.com/v1/me',\n                headers: {\n                  'Authorization': 'Bearer ' + access_token\n                },\n                success: function(response) {\n                  userProfilePlaceholder.innerHTML = userProfileTemplate(response);\n\n                  $('#login').hide();\n                  $('#loggedin').show();\n                }\n            });\n          } else {\n              // render initial screen\n              $('#login').show();\n              $('#loggedin').hide();\n          }\n\n          // for this function we need the loggedin user screen with all its data\n          document.getElementById('obtain-new-token').addEventListener('click', function() {\n            $.ajax({\n              url: '/refresh_token',\n              data: {\n                'refresh_token': refresh_token\n              }\n            }).done(function(data) {\n              access_token = data.access_token;\n              oauthPlaceholder.innerHTML = oauthTemplate({\n                access_token: access_token,\n                refresh_token: refresh_token\n              });\n            });\n          }, false);\n        }\n})\n\n\n// WEBPACK FOOTER //\n// ./public/js/spotifylogin.js"],"sourceRoot":""}